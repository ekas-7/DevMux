(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{68562:(e,t,r)=>{Promise.resolve().then(r.bind(r,97703))},97703:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var l=r(95155),a=r(12115),s=r(88252);function n(e){let{sidebar:t,codeEditor:r,drawingCanvas:a}=e,n=e=>()=>{let t=document.createElement("div");return t.className="relative flex items-center justify-center cursor-".concat("horizontal"===e?"col-resize":"row-resize"),t.innerHTML="\n      ".concat("horizontal"===e?'<div class="absolute h-[100%] w-0.5 bg-blue-500 hidden align-middle" id="horizontal-resize-line"></div>':'<div class="absolute w-[98%] h-0.5 bg-blue-500 hidden" id="vertical-resize-line"></div>','\n      <div class="absolute bg-gray-300 rounded-full ').concat("horizontal"===e?"w-0.5 h-6":"w-6 h-0.5",'"></div>\n    '),t},o=e=>{let t="horizontal"===e?document.getElementById("horizontal-resize-line"):document.getElementById("vertical-resize-line");t&&t.classList.remove("hidden")},i=e=>{let t="horizontal"===e?document.getElementById("horizontal-resize-line"):document.getElementById("vertical-resize-line");t&&t.classList.add("hidden")};return(0,l.jsxs)(s.A,{className:"h-screen flex split-parent bg-black",sizes:[30,70],minSize:[200,400],gutterSize:4,direction:"horizontal",gutter:n("horizontal"),onDragStart:()=>o("horizontal"),onDragEnd:()=>i("horizontal"),children:[(0,l.jsx)("aside",{className:"bg-black overflow-y-auto p-3 pr-1 scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:(0,l.jsx)("div",{className:"break-words w-full max-w-full text-gray-300",children:t})}),(0,l.jsxs)(s.A,{className:"flex flex-col split-parent bg-black h-full",sizes:[70,30],minSize:[200,100],gutterSize:4,direction:"vertical",gutter:n("vertical"),onDragStart:()=>o("vertical"),onDragEnd:()=>i("vertical"),children:[(0,l.jsx)("main",{className:"bg-black p-3 pl-1 pb-1 overflow-y-auto scrollbar-none scrollbar-thumb-gray-500 scrollbar-track-gray-700 ",children:r}),(0,l.jsx)("div",{className:"bg-black p-3 pl-1 pt-1 overflow-y-auto scrollbar-none scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:a})]})]})}var o=r(42844),i=r(29496),c=r(81990);r(21392);var d=r(13459),u=r(87648),h=r(2615);function x(e){var t;let{roomId:r}=e,{data:s}=(0,h.useSession)(),n=null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.name,[i,c]=(0,a.useState)(""),[d,u]=(0,a.useState)("video");return((0,a.useEffect)(()=>{r&&n&&(async()=>{try{let e=await fetch("/api/token?room=".concat(r,"&username=").concat(n)),t=await e.json();console.log(e,t),c(t.token)}catch(e){console.error(e)}})()},[r,n]),r)?""===i?(0,l.jsx)("div",{children:"Getting token..."}):(0,l.jsxs)(o.L,{video:!0,audio:!0,token:i,serverUrl:"wss://devmux-l0abrbfe.livekit.cloud","data-lk-theme":"default",style:{height:"80vh"},children:[(0,l.jsxs)("div",{className:"flex border-b border-gray-300 mb-4",children:[(0,l.jsx)("button",{onClick:()=>u("video"),className:"flex-1 py-2 text-center text-sm font-medium ".concat("video"===d?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"),children:"Video Call"}),(0,l.jsx)("button",{onClick:()=>u("chat"),className:"flex-1 py-2 text-center text-sm font-medium ".concat("chat"===d?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"),children:"Chat"})]}),(0,l.jsxs)("div",{className:"w-full flex",children:["video"===d&&(0,l.jsx)("div",{className:"w-full ",children:(0,l.jsx)(g,{})}),"chat"===d&&(0,l.jsx)("div",{children:(0,l.jsx)(b,{})})]})]}):(0,l.jsx)("div",{children:"Loading room..."})}function g(){let e=(0,i.t)([{source:u.CC.Source.Camera,withPlaceholder:!0},{source:u.CC.Source.ScreenShare,withPlaceholder:!1}],{onlySubscribed:!1});return(0,l.jsx)(c.G,{tracks:e,className:"w-full ",style:{height:"calc(90vh - var(--lk-control-bar-height))",maxHeight:"70vh"},children:(0,l.jsx)(c.P,{})})}function b(){return(0,l.jsx)("div",{className:"flex justify-center w-full ",style:{height:"calc(100vh - var(--lk-control-bar-height))"},children:(0,l.jsx)("div",{className:"w-full max-w-md",children:(0,l.jsx)(d.ry,{})})})}var m=r(44511),f=r(30037),v=r(29609),p=r(94624),y=r(64566),j=r(51263);let w=new p.ij("AIzaSyCNjcppkOu8IYk5OzoEuEeDNvpuhoa1gA8").getGenerativeModel({model:"gemini-1.5-flash"}),N=()=>{let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(""),[n,o]=(0,a.useState)(!1),i=e=>{let t;let r=[],a=/```([\s\S]*?)```/g,s=0;for(;null!==(t=a.exec(e));){let[,n]=t,o=t.index;s<o&&r.push((0,l.jsx)("p",{children:e.slice(s,o)},"text-".concat(s))),r.push((0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)(y.A,{language:"javascript",style:j.EP,className:"rounded-md border border-gray-600",children:n.trim()}),(0,l.jsx)("button",{className:"absolute top-2 right-2 p-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded",onClick:()=>navigator.clipboard.writeText(n.trim()),title:"Copy to Clipboard",children:(0,l.jsx)(m.A,{size:16})})]},"code-".concat(o))),s=a.lastIndex}return s<e.length&&r.push((0,l.jsx)("p",{children:e.slice(s)},"text-".concat(s))),r},c=async e=>{if(!e.trim())return;let r={id:Date.now(),text:e,sender:"user"};t(e=>[...e,r]),o(!0);try{let r=await w.generateContent(e),l=await r.response,a=await l.text(),s={id:Date.now()+1,text:a,sender:"bot"};t(e=>[...e,s])}catch(r){console.error("Error generating response:",r);let e={id:Date.now()+1,text:"Sorry, I encountered an error. Please try again.",sender:"bot"};t(t=>[...t,e])}finally{o(!1)}},d=()=>{r.trim()&&(c(r.trim()),s(""))};return(0,a.useEffect)(()=>{let e=document.querySelector(".chat-container");e&&(e.scrollTop=e.scrollHeight)},[e]),(0,l.jsxs)("div",{className:"max-w-2xl h-[100%] mx-auto p-6 bg-gradient-to-b from-gray-900 to-gray-800 rounded-xl shadow-2xl border border-gray-700",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-6 p-4 bg-blue-900/50 rounded-lg shadow-md border border-blue-800/50",children:[(0,l.jsx)(f.A,{className:"text-blue-400",size:24}),(0,l.jsx)("h1",{className:"text-xl font-semibold text-blue-100",children:"DevDad"})]}),(0,l.jsxs)("div",{className:"chat-container space-y-4 max-h-[calc(100vh-300px)] min-h-[400px] overflow-y-auto p-4 rounded-lg bg-gray-800/50 backdrop-blur-sm border border-gray-700",children:[e.map(e=>(0,l.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,l.jsx)("div",{className:"p-4 rounded-2xl max-w-[80%] shadow-lg ".concat("user"===e.sender?"bg-blue-600 text-blue-50":"bg-gray-700 text-gray-100 border border-gray-600"),children:i(e.text)})},e.id)),n&&(0,l.jsx)("div",{className:"flex justify-start",children:(0,l.jsx)("div",{className:"bg-gray-700 text-gray-300 p-4 rounded-2xl animate-pulse border border-gray-600",children:"Thinking..."})})]}),(0,l.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,l.jsx)("input",{type:"text",value:r,onChange:e=>{s(e.target.value)},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())},placeholder:"Type your message...",className:"flex-1 p-4 rounded-lg bg-gray-800 text-gray-100 border border-gray-600 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 outline-none"}),(0,l.jsx)("button",{onClick:d,disabled:!r.trim()||n,"aria-label":"Send Message",className:"p-4 rounded-lg bg-blue-600 text-blue-50 hover:bg-blue-700 disabled:bg-gray-700 disabled:text-gray-400 disabled:border-gray-600 transition-colors duration-200 flex items-center justify-center disabled:cursor-not-allowed border border-transparent",children:(0,l.jsx)(v.A,{size:20})})]})]})};var k=r(96758);function z(e){let{roomId:t}=e,[r,s]=(0,a.useState)("video"),[n,o]=(0,a.useState)(!1),i=async()=>{await navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)};return(0,l.jsxs)("div",{className:"w-full h-full bg-[#151515] rounded-2xl flex flex-col justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"grid w-full grid-cols-2 border-b border-gray-700",children:[(0,l.jsx)("button",{onClick:()=>s("video"),className:"p-2 text-center text-gray-300 hover:bg-gray-700 transition-colors ".concat("video"===r?"border-b-2 border-blue-500 text-white":""),children:"Room"}),(0,l.jsx)("button",{onClick:()=>s("ai"),className:"p-2 text-center text-gray-300 hover:bg-gray-700 hover:rounded-tr-2xl transition-colors ".concat("ai"===r?"border-b-2 border-blue-500 text-white":""),children:"AI Chat"})]}),(0,l.jsxs)("div",{className:"bg-gray-800",children:["video"===r&&(0,l.jsx)(x,{roomId:t}),"ai"===r&&(0,l.jsx)(N,{})]})]}),"video"===r&&(0,l.jsxs)("div",{className:"p-4 bg-inherit border-t border-gray-700 flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-400 truncate w-2/3",title:t,children:["Room ID: ",t]}),(0,l.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-3 py-1 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded",children:[(0,l.jsx)(k.A,{className:"w-4 h-4"}),n?"Copied!":"Copy"]})]})]})}var C=r(32831),S=r(99609);function E(){return(0,l.jsx)("div",{className:"bg-gray-800 rounded-2xl overflow-hidden",children:(0,l.jsx)(C.l5,{files:{"/App.js":{code:"export default function App() {\n  return <h1>Hello, world!</h1>;\n}",active:!0},"/index.js":{code:'import React from "react";\nimport ReactDOM from "react-dom";\nimport App from "./App";\n\nReactDOM.render(<App />, document.getElementById("root"));'}},theme:S.Ee,template:"react",children:(0,l.jsxs)(C.am,{style:{height:"67.5vh"},children:[(0,l.jsx)(C.Lm,{style:{height:"100%"}}),(0,l.jsx)(C.cW,{style:{height:"100%"},closableTabs:!0,showTabs:!0,wrapContent:!0}),(0,l.jsx)(C.G5,{style:{height:"100%"}})]})})})}var A=r(25380);let D=A.A.generator(),I=e=>{let{canvasRef:t,ctx:r,color:s,setElements:n,elements:o,tool:i}=e,[c,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=t.current;if(!e)return;let l=()=>{e.height=2*window.innerHeight,e.width=2*window.innerWidth,e.style.width="".concat(window.innerWidth,"px"),e.style.height="".concat(window.innerHeight,"px");let t=e.getContext("2d");t&&(t.strokeStyle=s,t.lineWidth=5,t.lineCap="round",t.scale(2,2),r.current=t)};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),(0,a.useEffect)(()=>{r.current&&(r.current.strokeStyle=s)},[s]),(0,a.useLayoutEffect)(()=>{if(!t.current)return;let e=A.A.canvas(t.current);o.length>0&&r.current&&r.current.clearRect(0,0,t.current.width,t.current.height),o.forEach(t=>{if("rect"===t.element&&"number"==typeof t.width&&"number"==typeof t.height)e.draw(D.rectangle(t.offsetX,t.offsetY,t.width,t.height,{stroke:t.stroke,roughness:0,strokeWidth:5}));else if("line"===t.element&&"number"==typeof t.width&&"number"==typeof t.height)e.draw(D.line(t.offsetX,t.offsetY,t.width,t.height,{stroke:t.stroke,roughness:0,strokeWidth:5}));else if("pencil"===t.element&&t.path){let r=t.path.map(e=>[e.x,e.y]);e.linearPath(r,{stroke:t.stroke,roughness:0,strokeWidth:5})}})},[o]),(0,l.jsx)("div",{className:"w-full h-full rounded-2xl overflow-hidden",onMouseDown:e=>{let{offsetX:t,offsetY:r}=e.nativeEvent;"pencil"===i?n(e=>[...e,{offsetX:t,offsetY:r,path:[{x:t,y:r}],stroke:s,element:i}]):n(e=>[...e,{offsetX:t,offsetY:r,stroke:s,element:i}]),d(!0)},onMouseMove:e=>{if(!c)return;let{offsetX:t,offsetY:r}=e.nativeEvent;"rect"===i||"line"===i?n(e=>e.map((e,l)=>l===o.length-1?{offsetX:e.offsetX,offsetY:e.offsetY,width:t-e.offsetX,height:r-e.offsetY,stroke:e.stroke,element:e.element}:e)):"pencil"===i&&n(e=>e.map((e,l)=>l===o.length-1&&e.path?{...e,path:[...e.path,{x:t,y:r}]}:e))},onMouseUp:()=>{d(!1)},children:(0,l.jsx)("canvas",{ref:t,className:"bg-[#151515] rounded-2xl"})})};var R=r(65686),L=r(282),M=r(45780),T=r(14978),P=r(42558),W=r(80592),H=r(82715),O=r(10319);let Y=()=>{let e=(0,a.useRef)(null),t=(0,a.useRef)(null),[r,s]=(0,a.useState)("#ffffff"),[n,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)("pencil"),h=[{name:"pencil",icon:R.A},{name:"line",icon:L.A},{name:"rect",icon:M.A}];return(0,l.jsxs)("div",{className:"relative w-full max-h-full bg-[#151515] rounded-2xl overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 w-auto",children:(0,l.jsx)("div",{className:"bg-gray-700/80 backdrop-blur-sm p-1.5 rounded-xl shadow-lg",children:(0,l.jsxs)("div",{className:"flex items-center gap-5",children:[(0,l.jsx)("div",{className:"flex items-center space-x-3 bg-gray-600/50 p-1 rounded-lg",children:h.map(e=>{let{name:t,icon:r}=e;return(0,l.jsx)("button",{onClick:()=>u(t),className:"p-1 rounded-lg transition-all ".concat(d===t?"bg-blue-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-500/80"),children:(0,l.jsx)(r,{size:16})},t)})}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-600/50 p-1 rounded-lg",children:[(0,l.jsx)(T.A,{size:16,className:"text-gray-300"}),(0,l.jsx)("input",{type:"color",value:r,onChange:e=>s(e.target.value),className:"w-8 h-8 rounded border-0 bg-transparent cursor-pointer"})]}),(0,l.jsx)("div",{className:"h-8 w-px bg-gray-500"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>{c(e=>[...e,n[n.length-1]]),o(e=>e.filter((e,t)=>t!==n.length-1))},disabled:0===n.length,className:"p-1 text-gray-300 hover:bg-gray-600/50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(P.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>{o(e=>[...e,i[i.length-1]]),c(e=>e.filter((e,t)=>t!==i.length-1))},disabled:i.length<1,className:"p-1 text-gray-300 hover:bg-gray-600/50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(W.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>{if(e.current){let t=e.current,r=t.getContext("2d");r&&(r.fillStyle="white",r.fillRect(0,0,t.width,t.height),o([]))}},className:"p-1 text-red-400 hover:bg-gray-600/50 rounded-lg transition-colors",children:(0,l.jsx)(H.A,{size:16})}),(0,l.jsx)("button",{onClick:()=>{let t=e.current;if(t){let e=t.toDataURL("image/png"),r=document.createElement("a");r.href=e,r.download="whiteboard.png",r.click()}},className:"p-1 text-green-400 hover:bg-gray-600/50 rounded-lg transition-colors",children:(0,l.jsx)(O.A,{size:16})})]})]})})}),(0,l.jsx)(I,{canvasRef:e,ctx:t,color:r,setElements:o,elements:n,tool:d})]})},_=()=>(0,l.jsx)("div",{className:" flex flex-col h-full rounded-2xl",children:(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)(Y,{})})});function B(e){let{params:t}=e,{roomId:r}=(0,a.use)(t);return(0,l.jsx)(n,{sidebar:(0,l.jsx)(z,{roomId:r}),codeEditor:(0,l.jsx)(E,{}),drawingCanvas:(0,l.jsx)(_,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[505,501,193,79,615,910,441,517,358],()=>t(68562)),_N_E=e.O()}]);